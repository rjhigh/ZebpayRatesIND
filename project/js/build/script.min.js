function selectQuote(quoteCurrency){AppRates.loadData(quoteCurrency)}var Page=function(){function ViewModel(){this.rates=ko.observableArray([])}return{vm:new ViewModel,hideOfflineWarning:function(){document.querySelector(".rates-list").classList.remove("loading"),document.getElementById("offline").remove()},showOfflineWarning:function(){document.querySelector(".rates-list").classList.add("loading");var request=new XMLHttpRequest;request.open("GET","./offline.html",!0),request.onload=function(){if(200===request.status){var offlineMessageElement=document.createElement("div");offlineMessageElement.setAttribute("id","offline"),offlineMessageElement.innerHTML=request.responseText,document.getElementById("main").appendChild(offlineMessageElement)}else console.warn("Error retrieving offline.html")},request.onerror=function(){console.error("Connection error")},request.send()}}}(),AppRates=function(){function RateViewModel(){var self=this;self.pair="",self.buy="",self.sell=""}function RateApiService(){this.getAll=function(){return new Promise(function(resolve,reject){var request=new XMLHttpRequest;request.open("GET","https://www.zebapi.com/pro/v1/market"),request.onload=function(){console.log("response from zeb..",request.response),200===request.status?(console.log("response from zeb..",request.response),resolve(JSON.parse(request.response))):reject(Error(request.statusText))},request.onerror=function(){reject(Error("Network Error"))},request.send()})}}function RateAdapter(){var self=this;self.toRateViewModel=function(data){if(data){var vm=new RateViewModel;return vm.pair=data.pair,vm.buy="Buy: "+data.buy,vm.sell="Sell: "+data.sell,vm}return null},self.toRateViewModels=function(data){return data&&data.length>0?data.map(function(item){return self.toRateViewModel(item)}):[]}}function RateController(rateApiService,rateAdapter){this.getAll=function(){return rateApiService.getAll().then(function(response){return rateAdapter.toRateViewModels(response)})}}var rateApiService=new RateApiService,rateAdapter=new RateAdapter,rateController=new RateController(rateApiService,rateAdapter);return{loadData:function(quoteCurrency){document.querySelector(".rates-list").classList.add("loading"),rateController.getAll().then(function(response){response="BTC"==quoteCurrency?response.filter(function(item){return"ETH-BTC"==item.pair}):response.filter(function(item){return item.pair.split("-")[1]==quoteCurrency}),Page.vm.rates(response),document.querySelector(".rates-list").classList.remove("loading")})}}}();"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(function(reg){console.log("Successfully registered service worker",reg)}).catch(function(err){console.warn("Error whilst registering service worker",err)});var defaultCurrency="INR";window.addEventListener("online",function(e){console.log("You are online"),Page.hideOfflineWarning(),AppRates.loadData(defaultCurrency)},!1),window.addEventListener("offline",function(e){console.log("You are offline"),Page.showOfflineWarning(defaultCurrency)},!1),navigator.onLine?AppRates.loadData(defaultCurrency):Page.showOfflineWarning(),ko.applyBindings(Page.vm);
//# sourceMappingURL=script.min.js.map